{% extends "habits/base_habits.html" %}

{% load app_filters %}

{% block dynamic_menu %}
  {% for habit in habit_list %}
  <li class="nav-item">
    {% if habit.good_habit %}
    <a href="{% url 'habit_detail' habit.id %}" class="nav-link">
      <i class="far fa-thumbs-up"></i>
      <span>{{ habit.habit_name }}</span>
    </a>
    {% else %}
    <a href="{% url 'habit_detail' habit.id %}" class="nav-link">
      <i class="far fa-thumbs-down"></i>
      <span>{{ habit.habit_name }}</span>
    </a>
    {% endif %}
  </li>
  {% endfor %}
{% endblock %}

{% block main %}
<div class="span5 col-lg-6 col-md-7" id="sandbox-container">
  <div class="input-group">
    <div class="input-group-prepend" data-toggle="tooltip" data-placement="bottom" title="Today">
      <span id="date-today" class="input-group-text btn btn-outline-info">
        <i class="far fa-calendar"></i>
      </span>
    </div>
    <form method="POST">
      {% csrf_token %}
      {{ form.as_p }}
      <input id="date" type="text" method="POST" url="{% url 'progress' %}" class="form-control datepicker date">
    </form>
    <div class="input-group-append">
      <span class="input-group-text input-group-addon">
        <i class="fas fa-calendar-alt"></i>
      </span>
    </div>
  </div>
</div>

<br/>
<div id="occurences" class="container-fluid">
  {% for key, value in occurence.items %}
  <div class="{{ value|get_occurence:num_motives }}-circle">{{ key }}</div>
  {% endfor %}
</div>
<br/>

<div id="progress-table">
  <table class="table">
    <tr>
      <th>Habit</th>
      <th>Action</th>
      <th>Motive</th>
      <th>Date/Time</th>
    </tr>
    {% for action in action_list %}
    <tr>
      <td>
        {{ action.habit_action }}
      </td>
      <td>
        {{ action }}<br/><br/>
      </td>
      <td>
        {% for t in action.motives.all %}
        {{ t }},
        {% endfor %}
      </td>
      <td>{{ action.action_time }}</td>
    </tr>
    {% endfor %}
  </table>
</div>
{% endblock %}
