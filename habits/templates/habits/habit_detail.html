{% extends "habits/base_index.html" %}

{% block main %}

<div id="wrapper" class="">
  <!-- Sidebar -->
{% if not user.is_anonymous %}
  <div id="sidebar-wrapper" class="col-sm-3">
    <ul class="sidebar-nav">
      <li>
        <span data-toggle="modal">
          <a id="new-habit-button" data-target="#modal" data-form="{% url 'habit_new' %}" href="#" data-toggle="tooltip" data-placement="right" title="Add a habit">
            <i class="far fa-plus-square m-4" style="float:right"></i>
          </a>
        </span>
      </li>
      <li class="sidebar-brand">
        <a href="{% url 'habits' %}">Habits</a>
      </li>
      {% for habit in habit_list %}
      <li>
        {% if habit.good_habit %}
          <a href="{% url 'habit_detail' habit.id %}" style="color:#008000">{{ habit.habit_name }}</a>
        {% else %}
          <a href="{% url 'habit_detail' habit.id %}" style="color:#B22222">{{ habit.habit_name }}</a>
        {% endif %}
      {% endfor %}
      </li>
    </ul>
  </div><!-- /#sidebar-wrapper -->
  <div id="page-content-wrapper">
    <a href="#menu-toggle" class="btn btn-outline-secondary" id="menu-toggle" style="width: 35px">
      <i id="left-caret" class="fas fa-chevron-left" style="display: none"></i>
      <i id="right-caret" class="fas fa-chevron-right"></i>
    </a>
    <div class="container-fluid">
       <!-- Modal -->
       <div class="modal fade" id="edit-modal"></div>
       <!-- /.modal -->
       <a href="{% url 'habit_delete' habit.pk %}" class="btn btn-outline-danger mr-2" style="float:right" role="button" data-toggle="tooltip" data-placement="bottom" id="delete_habit" title="Delete {{ habit }}">
         <i class="far fa-minus-square"></i>
       </a>

       <span data-toggle="modal">
         <a id="edit-habit-button" data-form="{% url 'habit_edit' habit_id=habit_id %}" href="#" class="btn btn-outline-info mr-2" style="float:right" role="button" data-toggle="tooltip" data-target="#modal" data-placement="bottom" title="Edit {{ habit }}">
           <i class="fas fa-pencil-alt"></i>
         </a>
       </span>

       <span data-toggle="modal">
         <a id="new-action-button" data-form="{% url 'action_new' habit_id=habit_id %}" href="#" class="btn btn-outline-info mr-2" style="float:right" role="button" data-toggle="tooltip" data-target="#modal" data-placement="bottom" title="Add an action">
           <i class="far fa-plus-square"></i>
         </a>
       </span>

       <h2>{{ habit }}</h2>

       <table class="table">
         <tr>
           <th></th>
           <th>Actions</th>
           <th>Motives</th>
           <th>Date/Time</th>
         </tr>
         {% for action in action_list %}
         <tr>
           <td>
             <span data-toggle="modal">
               <a data-form="{% url 'action_edit' habit_id=habit.id pk=action.pk %}" href="#" class="edit-action-button btn btn-outline-info mr-2 btn-sm" role="button" data-toggle="tooltip" data-target="#modal" data-placement="bottom" title="Edit {{ action }}">
                 <i class="fas fa-pencil-alt"></i>
               </a>
             </span>
             <a href="{% url 'action_delete' pk=action.pk %}" class="btn btn-outline-danger mr-2 btn-sm" role="button" data-toggle="tooltip" data-placement="bottom" title="Delete {{ action }}">
               <i class="far fa-minus-square"></i>
             </a>
           </td>
           <td>
             {{ action }}<br/><br/>
           </td>
           <td>
             {% for t in action.motives.all %}
             {{ t }},
             {% endfor %}
           </td>
           <td>{{ action.action_time }}</td>
         </tr>
         {% endfor %}
       </table>
        <!-- <div id="like_button_container"></div> -->
    </div>
  </div><!-- /#page-content-wrapper -->
</div><!-- /#wrapper -->
{% else %}
<div id="page-content-wrapper">
  <div class="container-fluid">
    <p>Please login to see this page.</p>
  </div>
</div>
{% endif %}

{% endblock %}
